<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>StudyFlix - Plataforma de Estudos</title>
    <style>
        body {
            margin: 0;
            background-color: #141414;
            color: #fff;
            font-family: Arial, sans-serif;
        }

        header {
            background: linear-gradient(to bottom, #e44aff5d, transparent);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between; 
            align-items: center;
            height: 60px;
        }

        #logo {
            padding-top: 15px;
            height: 100px;
            width: 100px;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        /* Estilo para o Status do Usu√°rio no Header */
        #user-status-container {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 16px;
        }
        
        #user-status-container span {
            color: #ccc;
        }

        #user-status-container b {
            color: #e44aff; /* Cor de destaque para o nome */
        }

        #user-status-container button {
            background-color: #e44aff;
            color: #141414;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        #user-status-container button:hover {
            background-color: #d130e6;
        }
        /* Fim do Estilo do Status */

        main {
            padding: 20px;
            max-width: 900px;
            margin: auto;
        }

        section {
            margin-bottom: 40px;
        }

        h2 {
            border-bottom: 2px solid #e44aff5d;
            padding-bottom: 8px;
            margin-bottom: 15px;
            color: #e44aff;
        }

        #sinopse p {
            font-size: 18px;
            line-height: 1.5;
        }
        
        /* Estilo para o CTA (Call to Action) */
        #call-to-action {
            background-color: #333;
            border: 1px solid #e44aff;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
        }

        #call-to-action p {
            font-size: 20px;
            margin-bottom: 25px;
        }

        .cta-button {
            background-color: #e44aff;
            color: #141414;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .cta-button:hover {
            background-color: #d130e6;
            transform: scale(1.05);
        }

        @media (max-width: 600px) {
            header {
                flex-direction: column;
                height: auto;
                padding-bottom: 15px;
            }
            #user-status-container {
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>

<header>
    <img id="logo" src="https://i.ibb.co/Z1BfkM6Y/Logo-1.png" alt="Logo StudyFlix" />
    <div id="user-status-container">
        <span>Carregando status...</span>
    </div>
</header>

<main>
    <section id="sinopse">
        <h2 class="arv">Sobre o StudyFlix</h2>
        <p>
            O **StudyFlix** √© sua plataforma de estudos online, organizada como um servi√ßo de streaming. Nosso objetivo √© facilitar o aprendizado com um conte√∫do estruturado, que inclui resumos e, o mais importante, **Quizzes Competitivos**.
        </p>
        <p>
            Domine novos t√≥picos e teste seus conhecimentos com nosso sistema de perguntas e respostas. Quanto mais voc√™ acerta, mais alto voc√™ sobe no **Ranking Nacional**, competindo com outros estudantes!
        </p>
        
        <h2>Recursos em Destaque</h2>
        <p>
            Navegue pelas √°reas de conhecimento, valide seu aprendizado no modo Quiz. O StudyFlix transforma seu tempo de estudo em uma jornada divertida e competitiva.
        </p>
        <ul>
            <li>**Conte√∫do Curado:** Focado em temas essenciais.</li>
            <li>**Sistema de Ranking:** Compita com outros usu√°rios e veja seu nome no topo.</li>
            <li>**Acesso Exclusivo:** Pontua√ß√£o e ranking garantidos apenas para usu√°rios logados.</li>
        </ul>
    </section>
    
    <section id="call-to-action">
        <p>Aguarde...</p>
    </section>

</main>

<script>
    // URLS importantes (certifique-se que est√£o corretas)
    const USER_DATA_API = 'api/user_data.php';
    const QUIZ_PAGE = 'questoese.html';
    const LOGIN_PAGE = 'login.html'; // Altere se o nome do seu login/cadastro for diferente
    
    // Fun√ß√£o para carregar dinamicamente o status do usu√°rio e o CTA
    document.addEventListener("DOMContentLoaded", () => {
        const logo = document.getElementById("logo");
        const statusContainer = document.getElementById("user-status-container");
        const ctaSection = document.getElementById("call-to-action");

        // Clique na logo ‚Üí volta para a p√°gina principal
        logo.addEventListener("click", () => {
            window.location.href = "study.html"; // Redireciona para esta p√°gina
        });
        
        // 1. Busca os dados de sess√£o no PHP
        fetch(USER_DATA_API)
            .then(response => response.json())
            .then(data => {
                let statusHTML = '';
                let ctaHTML = '';

                if (data.logged_in) {
                    // --- USU√ÅRIO LOGADO ---
                    const displayName = data.display_name || 'Usu√°rio';
                    
                    // Status no Header
                    statusHTML = `
                        <span>Ol√°, <b>${displayName}</b>!</span>
                        <button onclick="location.href='logout.php'">Sair</button>
                    `;
                    
                    // CTA Principal: Jogar
                    ctaHTML = `
                        <p>Voc√™ est√° pronto para testar seus conhecimentos e subir no Ranking StudyFlix?</p>
                        <button onclick="location.href='${QUIZ_PAGE}'" class="cta-button">
                            üéÆ Iniciar o Quiz Agora!
                        </button>
                    `;
                } else {
                    // --- VISITANTE / N√ÉO LOGADO ---
                    
                    // Status no Header
                    statusHTML = `
                        <span>Voc√™ √© um Visitante.</span>
                        <button onclick="location.href='${LOGIN_PAGE}'">Login/Cadastro</button>
                    `;
                    
                    // CTA Principal: Fazer Login
                    ctaHTML = `
                        <p>Para salvar seu progresso, competir com outros usu√°rios e ter acesso total, fa√ßa login agora!</p>
                        <button onclick="location.href='${LOGIN_PAGE}'" class="cta-button login-required">
                            üîë Fazer Login e Jogar
                        </button>
                    `;
                }

                // Aplica o HTML gerado
                statusContainer.innerHTML = statusHTML;
                ctaSection.innerHTML = ctaHTML;
            })
            .catch(error => {
                console.error('Erro ao carregar status do usu√°rio:', error);
                statusContainer.innerHTML = '<span>Erro ao carregar dados.</span>';
                ctaSection.innerHTML = '<p>N√£o foi poss√≠vel conectar ao servidor. Tente novamente mais tarde.</p>';
            });
    });
</script>

</body>
</html>